{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>A1 Bakery</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Sacramento&display=swap');
    
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    /* --- YE PART BUTTON KO NAVBAR MEIN FIT KAREGA --- */
    .nav-links li a.btn-signup {
        border: 2px solid #D4AF37 !important;
        height: 36px !important;             
        line-height: 32px !important;        
        margin-top: 14px !important;         
        display: inline-flex !important;
        align-items: center !important;
        padding: 0 15px !important;
        border-radius: 6px !important;
        background: transparent !important;
        transition: all 0.3s ease;
    }

    .nav-links li a.btn-signup:hover {
        background-color: #D4AF37 !important;
        color: #000 !important;
    }

    /* Professional Logout Modal Styling */
    #logoutModal {
        border-radius: 15px;
        max-width: 450px;
        background-color: #1a1a1a; 
        color: white;
        border: 2px solid #D4AF37; 
    }
    .modal .modal-footer {
        background-color: #1a1a1a;
        border-top: 1px solid #333;
        display: flex;
        justify-content: center;
        gap: 20px;
        padding-bottom: 25px;
    }
    .btn-confirm-logout {
        background-color: #D4AF37 !important;
        color: black !important;
        font-weight: bold !important;
        border-radius: 25px !important;
    }
    .btn-cancel-logout {
        background-color: transparent !important;
        color: #D4AF37 !important;
        border: 1px solid #D4AF37 !important;
        border-radius: 25px !important;
    }
  </style>
</head>
<body>
    
    <div id="preloader" style="position: fixed; width: 100%; height: 100%; background: #000; z-index: 9999; display: flex; justify-content: center; align-items: center; transition: opacity 0.5s ease;">
        <div class="loader" style="border: 5px solid #333; border-top: 5px solid #D4AF37; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite;"></div>
    </div>

    <script>
        window.addEventListener('load', function() {
            var loader = document.getElementById('preloader');
            loader.style.opacity = '0'; 
            setTimeout(function(){
                loader.style.display = 'none'; 
            }, 500);
        });
    </script>

    <header class="navbar-fixed">
        <nav class="royal-nav">
            <div class="nav-container">
                <a href="{% url 'home' %}" class="brand-logo modern-logo display-flex-center">
                    <img src="{% static 'images/logo.png' %}" alt="A1 Logo" class="nav-header-logo">
                    A1<span>Bakery</span>
                </a>
                
                <ul class="nav-links">
                    <li><a href="{% url 'home' %}">Home</a></li>
                    <li><a href="{% url 'about' %}">About</a></li> 
                    <li><a href="{% url 'shop' %}">Product</a></li>

                    {% if user.is_authenticated %}
                        <li><a href="{% url 'order' %}">My Orders</a></li>
                        <li>
                            <a href="#logoutModal" class="modal-trigger" style="color: #D4AF37; cursor: pointer;">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </a>
                        </li>
                    {% else %}
                        <li><a href="{% url 'login' %}">Log In</a></li>
                        <li><a href="{% url 'signup' %}" class="btn-signup">Sign Up</a></li>
                    {% endif %}

                    {% if user.is_superuser %} 
                        <li><a href="{% url 'admin_order' %}" class="admin-nav-link">
                            <i class="fas fa-crown"></i> Orders
                        </a></li>
                    {% endif %}  
                </ul>
            </div>
        </nav>
    </header>

  <main class="container">
    {% block content %}
    {% endblock %}
  </main>

  <div id="logoutModal" class="modal">
    <div class="modal-content center-align">
        <h4 style="font-family: 'Sacramento', cursive; color: #D4AF37; font-size: 3rem; margin-bottom: 0;">A1 Bakery</h4>
        <div style="height: 2px; background: #D4AF37; width: 60px; margin: 0 auto 20px;"></div>
        <p style="font-size: 1.3rem; font-weight: 500;">Are you sure you want to sign out?</p>
        <p style="color: #888; font-size: 0.9rem;">You will need to login again to manage your orders.</p>
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect btn-flat btn-cancel-logout">Stay Logged In</a>
        
        <form action="{% url 'logout' %}" method="post" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="waves-effect waves-light btn btn-confirm-logout">
                Yes, Sign Out
            </button>
        </form>
    </div>
  </div>

  <footer class="final-royal-footer">
    <div class="ribbon-wrapper">
        <div class="gold-ribbon">~ Connect With Us ~</div>
    </div>
    <div class="footer-inner-container">
        <div class="footer-column brand-column">
            <div class="logo-lockup">
                <img src="{% static 'images/logo.png' %}" alt="Logo" class="footer-logo-final">
                <span class="brand-text-final">A1 Bakery</span>
            </div>
            <p class="brand-tagline">"Eat a taste of happiness"</p>
            <div class="info-block">
                <p><i class="fas fa-map-marker-alt gold-icon"></i> Misri Khan Ka Bada, Malegaon</p>
                <p><i class="fas fa-phone-alt gold-icon"></i> +91 8421857457</p>
                <p><i class="fas fa-envelope gold-icon"></i> a1bakery@gmail.com</p>
            </div>
        </div>
        <div class="footer-column links-column">
            <h4 class="column-title">Quick Menu</h4>
            <div class="title-underline"></div>
            <ul class="final-links">
                <li><a href="{% url 'home' %}">Home</a></li>
                <li><a href="{% url 'shop' %}">Our Menu</a></li>
                <li><a href="{% url 'about' %}">Our Story</a></li>
                <li><a href="{% url 'signup' %}">Join Membership</a></li>
            </ul>
        </div>
        <div class="footer-column social-column">
            <h4 class="column-title">Follow Us</h4>
            <div class="title-underline"></div>
            <div class="final-social-icons">
                <a href="#" class="icon-box fb"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="icon-box insta"><i class="fab fa-instagram"></i></a>
                <a href="https://wa.me/918421857457" class="icon-box wa"><i class="fab fa-whatsapp"></i></a>
            </div>
            <div class="footer-bottom-text">&copy; 2025 A1 Bakery. <br>All Rights Reserved.</div>
        </div>
    </div>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.2/vanilla-tilt.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
        var modals = document.querySelectorAll('.modal');
        M.Modal.init(modals, { opacity: 0.8, dismissible: true });
    });
  </script>
</body>
</html>
